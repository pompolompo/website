[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Ferran Garcia",
    "section": "",
    "text": "Evolution of gas prices in Llinars del Vallès\n\n\n\n\n\n\n\n\nFeb 12, 2024\n\n\n\n\n\n\n\nPreus a les gasolineres d’Espanya\n\n\nQuinen preus fixen les gasolineres per cada producte al llarg del temps?\n\n\n\n\n\nFeb 11, 2024\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#education",
    "href": "index.html#education",
    "title": "Ferran Garcia",
    "section": "Education",
    "text": "Education\nUniversity of Barcelona | Sept 2019 - June 2025\nPolytechnic University of Catalonia | Sept 2019 - June 2025\nMaastricht University | Sept 2022 - June 2023\nUniversity of Sevlle | Sept 2023 - Jan 2024"
  },
  {
    "objectID": "index.html#experience",
    "href": "index.html#experience",
    "title": "Ferran Garcia",
    "section": "Experience",
    "text": "Experience\nAmplifon | Data Analyst Internship | Jan 2024 - Dec 2024\nPolytechnic University of Catalonia | Teaching Assistant | Feb 2023 - Feb 2025"
  },
  {
    "objectID": "projects/index.html",
    "href": "projects/index.html",
    "title": "Projects",
    "section": "",
    "text": "Predicting House Prices with Machine Learning\n\n\n\nPython\n\n\nMachine Learning\n\n\nData Cleaning\n\n\n\nThis project involves using machine learning algorithms to predict house prices based on various features such as location, size, and amenities. It includes data cleaning, feature engineering, and model selection.\n\n\n\nJan 1, 2024\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCustomer Segmentation Using Clustering Techniques\n\n\n\nR\n\n\nMachine Learning\n\n\nClustering\n\n\nStatistical Modelling\n\n\n\nThis project focuses on segmenting customers into different groups based on their purchasing behavior and demographics. It uses clustering algorithms like K-means and hierarchical clustering to identify distinct customer segments.\n\n\n\nApr 1, 2024\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVisualizing Global CO2 Emissions\n\n\n\nR\n\n\nData Visualization\n\n\nEnvironmental Science\n\n\n\nThis project involves creating visualizations to show trends in global CO2 emissions over time. It includes data extraction from public databases, data cleaning, and using visualization libraries to create interactive charts and graphs.\n\n\n\nJul 1, 2024\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "blog/second-post/index.html",
    "href": "blog/second-post/index.html",
    "title": "Second Post",
    "section": "",
    "text": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Quis imperdiet massa tincidunt nunc pulvinar sapien et ligula. Amet cursus sit amet dictum sit amet. Eget duis at tellus at urna condimentum. Convallis aenean et tortor at risus viverra. Tincidunt ornare massa eget egestas purus viverra accumsan. Et malesuada fames ac turpis egestas. At imperdiet dui accumsan sit amet. Ut ornare lectus sit amet est placerat. Enim nulla aliquet porttitor lacus luctus accumsan tortor posuere. Duis ultricies lacus sed turpis tincidunt id aliquet risus. Mattis enim ut tellus elementum sagittis. Dui id ornare arcu odio ut. Natoque penatibus et magnis dis. Libero justo laoreet sit amet cursus sit. Sed faucibus turpis in eu. Tempus iaculis urna id volutpat lacus laoreet.\nPhasellus vestibulum lorem sed risus. Eget felis eget nunc lobortis mattis. Sit amet aliquam id diam maecenas ultricies. Egestas maecenas pharetra convallis posuere morbi. Etiam erat velit scelerisque in dictum non consectetur a erat. Cras fermentum odio eu feugiat pretium nibh ipsum consequat. Viverra accumsan in nisl nisi scelerisque. Et netus et malesuada fames ac. Amet tellus cras adipiscing enim eu turpis egestas pretium aenean. Eget lorem dolor sed viverra ipsum nunc aliquet. Ultrices dui sapien eget mi proin sed libero enim sed. Ultricies mi eget mauris pharetra et ultrices neque. Ipsum suspendisse ultrices gravida dictum. A arcu cursus vitae congue mauris rhoncus aenean vel. Gravida arcu ac tortor dignissim convallis. Nulla posuere sollicitudin aliquam ultrices."
  },
  {
    "objectID": "blog/first-post/index.html",
    "href": "blog/first-post/index.html",
    "title": "First Post",
    "section": "",
    "text": "Sed risus ultricies tristique nulla aliquet. Neque volutpat ac tincidunt vitae semper quis lectus nulla.\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Enim sed faucibus turpis in eu mi bibendum neque. Ac orci phasellus egestas tellus rutrum tellus pellentesque eu. Velit sed ullamcorper morbi tincidunt ornare massa. Sagittis id consectetur purus ut faucibus pulvinar elementum integer. Tincidunt nunc pulvinar sapien et ligula ullamcorper malesuada proin libero. Lobortis feugiat vivamus at augue eget arcu. Aliquam ut porttitor leo a diam sollicitudin tempor id eu. Mauris a diam maecenas sed enim ut sem viverra aliquet. Enim ut tellus elementum sagittis vitae et leo duis. Molestie at elementum eu facilisis sed odio morbi quis commodo. Sapien pellentesque habitant morbi tristique senectus. Quam vulputate dignissim suspendisse in est. Nulla pellentesque dignissim enim sit amet venenatis urna cursus eget.\nVelit aliquet sagittis id consectetur purus ut faucibus pulvinar elementum. Viverra mauris in aliquam sem fringilla ut morbi tincidunt augue. Tortor at auctor urna nunc id. Sit amet consectetur adipiscing elit duis tristique sollicitudin. Aliquet nibh praesent tristique magna sit amet purus. Tristique senectus et netus et malesuada fames ac turpis. Hac habitasse platea dictumst quisque. Auctor neque vitae tempus quam pellentesque nec nam aliquam. Ultrices tincidunt arcu non sodales neque sodales ut etiam. Iaculis at erat pellentesque adipiscing. Cras tincidunt lobortis feugiat vivamus. Nisi est sit amet facilisis magna etiam. Pharetra pharetra massa massa ultricies mi quis hendrerit. Vitae sapien pellentesque habitant morbi tristique senectus. Ornare aenean euismod elementum nisi quis eleifend quam adipiscing vitae."
  },
  {
    "objectID": "blog/third-post/index.html",
    "href": "blog/third-post/index.html",
    "title": "Third Blog Post",
    "section": "",
    "text": "The source for any page in your website could also be a Jupyter Notebook. This one is third-post/index.ipynb.\nHere’s an example I borrowed from the Seaborn docs:\n\nimport seaborn as sns\n\nsns.set_theme(style=\"whitegrid\")\n\n# Load the diamonds dataset\ndiamonds = sns.load_dataset(\"diamonds\")\n\n# Plot the distribution of clarity ratings, conditional on carat\nsns.displot(\n    data=diamonds,\n    x=\"carat\", hue=\"cut\",\n    kind=\"kde\", height=4, aspect=1.5,\n    multiple=\"fill\", clip=(0, None),\n    palette=\"ch:rot=-.25,hue=1,light=.75\",   \n)"
  },
  {
    "objectID": "a.html",
    "href": "a.html",
    "title": "Ferran Garcia",
    "section": "",
    "text": "English  Català  Español\n\n\n\n\nEducation: UB, UPC, UM, US (econ and stats)\nExperience: 2 years uni and 1 year intern\nProjects: web scrapping, app development, modelling"
  },
  {
    "objectID": "index.html#tutorials",
    "href": "index.html#tutorials",
    "title": "Ferran Garcia",
    "section": "",
    "text": "See all posts here!\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about-ca.html",
    "href": "about-ca.html",
    "title": "Ferran Garcia",
    "section": "",
    "text": "English  Català  Español\n\n\nSóc un estadístic i economista orientat a resultats, amb actitud proactiva i ganes de seguir aprenent. M’especialitzo en analitzar i modelitzar dades per extreure informació d’interès i comunicar-la.\n\nEducation: Doble grau en Estadística i Economia a la UPC i UB. Intercanvi Erasmus anual a Maastricht i semestral a Sevilla.\nExperience: Becari estadística de l’universitat (2 anys) i analista de dades comercials a Amplifon (1 any), altres feines a temps parcial (àribtre, recepcionista, professor, cambrer)\nInteresos: Estadística Bayesiana, Models Espai - Temps, Web Scrapping, Mercat Inmobiliari, Mercats Financers"
  },
  {
    "objectID": "index.html#posts",
    "href": "index.html#posts",
    "title": "Ferran Garcia",
    "section": "Posts",
    "text": "Posts\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "notes/note_1/ca/index.html",
    "href": "notes/note_1/ca/index.html",
    "title": "Acessando APIs com R: Exemplos com a PokéAPI!",
    "section": "",
    "text": "Tip\n\n\n\nEsse post foi origalmente publicado no blog da Curso-R."
  },
  {
    "objectID": "notes/note_1/ca/index.html#introdução",
    "href": "notes/note_1/ca/index.html#introdução",
    "title": "Acessando APIs com R: Exemplos com a PokéAPI!",
    "section": "Introdução",
    "text": "Introdução\nOlá!\nRecentemente eu (Bea) andei explorando algumas APIs, com ajuda do Julio, que ficou respondendo as dúvidas! No processo aprendemos muitas coisas legais e resolvemos compartilhar com vocês através de alguns posts.\nO tema dá muito pano pra manga, pois usamos código em R para automatizar quase tudo! Nas últimas semanas, aprendemos a trabalhar com o GitHub (Ex: criar e configurar repositórios), Zoom (criar chamadas), Google Drive e Sheets (estruturar e editar arquivos), e Google Classroom (criar e configurar salas de aula).\nTudo isso usando muito tidyverse!\n\nMas calma!! Vamos começar do começo. Neste primeiro post, vamos falar sobre o que é uma API e mostrar um exemplo básico."
  },
  {
    "objectID": "notes/note_1/ca/index.html#o-que-é-uma-api",
    "href": "notes/note_1/ca/index.html#o-que-é-uma-api",
    "title": "Acessando APIs com R: Exemplos com a PokéAPI!",
    "section": "O que é uma API?",
    "text": "O que é uma API?\nAPI é uma sigla para Application Programming Interface, ou seja, uma interface de computação. Sem usar palavras complicadas, uma explicação que está nos slides do curso de Deploy! é:\n\nUma API não deixa de ser um “link” que aceita parâmetros e retorna dados. As APIs também são abordadas no curso de Web Scraping!"
  },
  {
    "objectID": "notes/note_1/ca/index.html#pokéapi",
    "href": "notes/note_1/ca/index.html#pokéapi",
    "title": "Acessando APIs com R: Exemplos com a PokéAPI!",
    "section": "PokéAPI",
    "text": "PokéAPI\nUm exemplo de acesso à API é buscando na PokéAPI, uma API para buscar Pokémons! E com tantas possibilidades interessantes, porque buscar justamente Pokémons? Essa API tem fins educacionais, portanto é um ótimo lugar para começar a praticar o tema.\n\nO primeiro passo para acessar qualquer API é procurar uma documentação.\nNa documentação do PokéAPI, é mostrado que devemos usar o seguinte padrão:\nGET https://pokeapi.co/api/v2/{endpoint}/\nIsso significa que devemos fazer uma requisição GET (apenas para consultar dados), começar com a url base (é a parte que não muda: https://pokeapi.co/api/v2/) e complementar com os parâmetros da busca (que chamamos de endpoint).\nO pacote httr é muito usado para acessar APIs através do R, e disponibiliza uma função chamada httr::GET() para fazer esse tipo de acesso!\nPor exemplo:\n# url_base - nunca muda na mesma API\nurl_base &lt;- \"https://pokeapi.co/api/v2\"      \n# endpoint - é o que muda o resultado\nendpoint &lt;- \"/pokemon/ditto\"                 \n# precisamos colar os textos para criar o link\nu_pokemon &lt;- paste0(url_base, endpoint) \n# ver como o texto ficou colado\n# u_pokemon \n# &gt; \"https://pokeapi.co/api/v2/pokemon/ditto\"\n# fazer a requisição do tipo GET\nr_pokemon &lt;- httr::GET(u_pokemon) \nr_pokemon\nResponse [https://pokeapi.co/api/v2/pokemon/ditto]\n  Date: 2021-12-06 13:16\n  Status: 200\n  Content-Type: application/json; charset=utf-8\n  Size: 22.3 kB\nEsse resultado é um pouco diferente do que estamos acostumados! O que é mais importante de reparar é o status, pois indica se a requisição foi bem sucedida. Status: 200 significa que deu certo! :)\nAs APIs costumam retornar arquivos JSON, e para acessar o conteúdo que foi obtido podemos usar a função httr::content():\nc_pokemon &lt;- httr::content(r_pokemon)\nAo salvar o resultado da função em um objeto, podemos ver que agora a classe dele é uma lista:\nclass(c_pokemon)\n[1] \"list\"\nPodemos manipular essa lista com funções do tidyverse para obter uma tabela, assim fica mais fácil de trabalhar. Mas atenção, da seguinte forma ela ainda não está no formato tidy! Saiba mais o que são dados tidy no material do curso de Faxina de Dados.\nlibrary(magrittr)\ndados_ditto &lt;- c_pokemon %&gt;%\n  purrr::map(unlist, recursive = TRUE) %&gt;%\n  purrr::map(tibble::enframe) %&gt;%\n  purrr::map_dfr(\n    ~dplyr::mutate(.x, dplyr::across(.fns = as.character)), \n    .id = \"id\"\n  )\ndplyr::glimpse(dados_ditto)\nRows: 396\nColumns: 3\n$ id    &lt;chr&gt; \"abilities\", \"abilities\", \"abilities\", \"abilities\", \"abilities\",…\n$ name  &lt;chr&gt; \"ability.name\", \"ability.url\", \"is_hidden\", \"slot\", \"ability.nam…\n$ value &lt;chr&gt; \"limber\", \"https://pokeapi.co/api/v2/ability/7/\", \"FALSE\", \"1\", …\n\nAgora você pode usar o que aprendemos para pesquisar outros Pokémons! Quem sabe explorar a teoria de que o Ditto é um clone falho do Mew?\ndados_mew &lt;- \"https://pokeapi.co/api/v2/pokemon/mew\" %&gt;% \n  httr::GET() %&gt;% \n  httr::content() %&gt;%\n  purrr::map(unlist, recursive = TRUE) %&gt;%\n  purrr::map(tibble::enframe) %&gt;%\n  purrr::map_dfr(\n    ~dplyr::mutate(.x, dplyr::across(.fns = as.character)), \n    .id = \"id\"\n  )\ndplyr::glimpse(dados_mew)\nRows: 10,083\nColumns: 3\n$ id    &lt;chr&gt; \"abilities\", \"abilities\", \"abilities\", \"abilities\", \"base_experi…\n$ name  &lt;chr&gt; \"ability.name\", \"ability.url\", \"is_hidden\", \"slot\", \"1\", \"name\",…\n$ value &lt;chr&gt; \"synchronize\", \"https://pokeapi.co/api/v2/ability/28/\", \"FALSE\",…\nSaiba mais sobre a teoria aqui:\n\n\n\n\nÉ isso! Dúvidas, sugestões e críticas, mande aqui nos comentários. Comentem também quais exemplos, dentre os que foram listados, vocês gostariam de saber mais!!\nAté a próxima!"
  },
  {
    "objectID": "notes/note_1/ca/index.html#você-pode-se-interessar-também-por",
    "href": "notes/note_1/ca/index.html#você-pode-se-interessar-também-por",
    "title": "Acessando APIs com R: Exemplos com a PokéAPI!",
    "section": "Você pode se interessar também por…",
    "text": "Você pode se interessar também por…\n\nSlides do curso de Deploy\nSlides do curso de Web Scraping sobre APIs\nSlides do curso de Faxina sobre tidy data\nPacote httr"
  },
  {
    "objectID": "about-en.html",
    "href": "about-en.html",
    "title": "Ferran Garcia",
    "section": "",
    "text": "English  Català  Español\n\n\nI am a results-driven statistician and economist with a curious mindset and proactive approach, focused on transforming complex data into actionable insights and communicating them effectively to a broad audience.\n\nEducation: Doble degree in Statistica and Economica in UB and UPC. Erasmus exchange in Maastricht (1 year) and Sevilla (6 months)\nExperience: Statistic’s university department scolarship (2 years). Commercial data analyst in Amplifon (1 year). Multiple part time jobs (referee, recepcionist, waiter, professor)\nProjects: Bayesian Statistics, Spatio - Temporal modelling, Web Scrapping, Real Estate, Financial Markets"
  },
  {
    "objectID": "about-es.html",
    "href": "about-es.html",
    "title": "Ferran Garcia",
    "section": "",
    "text": "English  Català  Español\n\n\nSoy un estadístico y economista orientado a resultados, con actitud proactiva y ganas de seguir aprendiendo. Me especializo en analizar y modelizar datos para extraer información de interés y comunicarla.\n\nEducation: Doble grado en Economía y Estadística por la UB y UPC. Intercambio Erasmus anual en Maastrich y semestral en Sevilla.\nExperience: Becario del departamento de Estadística de la universidad (2 años). Analista de datos comerciales en Amplifon (1 año). Trabajos a tiempo parcial (árbitro, recepcionista, profesor, camarero)\nProjects: Estadística Bayesiana, Modelos Espacio-Tiempo, Web Scrapping, Mercado Inmobiliario, Mercados Financieros"
  },
  {
    "objectID": "notes/geoportal_api/ca/index.html",
    "href": "notes/geoportal_api/ca/index.html",
    "title": "Preus a les gasolineres d’Espanya",
    "section": "",
    "text": "On s’ón’ubiquen els punts de recàrrega?\nQuin carburant ofereixen?\nQuin preu cobren? Com canvia al llarg del temps?\nQuin horari obre?\nÉs d’autoservei?\nÉs una cooperativa?\nQui n’és el propietari?\nExisteixen portals similars a Europa"
  },
  {
    "objectID": "notes/geoportal_api/ca/index.html#quina-informació-hi-ha-al-geoportal",
    "href": "notes/geoportal_api/ca/index.html#quina-informació-hi-ha-al-geoportal",
    "title": "Preus a les gasolineres d’Espanya",
    "section": "",
    "text": "On s’ón’ubiquen els punts de recàrrega?\nQuin carburant ofereixen?\nQuin preu cobren? Com canvia al llarg del temps?\nQuin horari obre?\nÉs d’autoservei?\nÉs una cooperativa?\nQui n’és el propietari?\nExisteixen portals similars a Europa"
  },
  {
    "objectID": "notes/geoportal_api/ca/index.html#com-obtenim-les-dades",
    "href": "notes/geoportal_api/ca/index.html#com-obtenim-les-dades",
    "title": "Preus a les gasolineres d’Espanya",
    "section": "Com obtenim les dades?",
    "text": "Com obtenim les dades?\n\nConnexió amb les APIs\nCal connectarnos a la API del geoportal per obtenir les dades que ens interessen. Descarregarem en format .json, que R llegirà com llista. Finalment apilarem totes les observacions en una taula.\nEl geoportal ofereix múltiples APIs que donen accés a diferent informació (Servicios REST). Estem interessats en l’evolució dels preus de cada producte així que utilitzem la següent estructura:\n\nhttps://sedeaplicaciones.minetur.gob.es/\nServiciosRESTCarburantes/PreciosCarburantes/\nEstacionesTerrestresHist/FiltroProvinciaProducto/\n{FECHA}/{IDPROVINCIA}/{IDPRODUCTO}\n&lt;&gt;\n\n\nExemple en R\nUtilitzarem les següents llibreries d’R:\n\nsuppressWarnings(suppressMessages({\n  library(dplyr)\n  library(purrr)\n  library(httr2)\n}))\n\nSeleccionem la gasolina 95 E5 i codifiquem la data desitjada com dd-mm-yy:\nEstem interessats en el preu de la gasolina 95 E5 a la província de Barcelona amb informació del dia anterior.\n\ndata &lt;- format(Sys.Date() - 1, \"%d-%m-%Y\")\nproducte &lt;- \"01\"\nprovincies &lt;- set_names(\n  c(\"08\", \"17\", \"25\", \"43\"), \n  c(\"barcelona\", \"girona\", \"lleida\", \"tarragona\")\n)\n\nbase_url &lt;- provincies %&gt;% \n  map(\\(prov){\n    paste0(\n      \"https://sedeaplicaciones.minetur.gob.es/\",\n      \"ServiciosRESTCarburantes/PreciosCarburantes/\",\n      \"EstacionesTerrestresHist/FiltroProvinciaProducto/\",\n      data, \"/\", prov, \"/\", producte\n    )\n  })\n\nDemanem l’informació i la convertim en taula:\n\nresponse &lt;- base_url %&gt;% \n  map(\\(url) req_perform(request(url)))\n\ntbl &lt;- response %&gt;% \n  map(\\(resp){\n    resp_body_json(resp)[[\"ListaEESSPrecio\"]] %&gt;% \n      map(\\(json) as_tibble(list_flatten(json))) %&gt;% \n      bind_rows() %&gt;% \n      mutate(PrecioProducto = as.numeric(sub(\",\", \".\", PrecioProducto)))\n  })\n\nFem una ullada a la distribució de preus:\n\nwith(list_c(tbl), boxplot((PrecioProducto ~ Provincia)))\n\n\n\n\n\n\n\nhist(list_c(tbl)[[\"PrecioProducto\"]], breaks = 30)"
  },
  {
    "objectID": "notes/geoportal_api/ca/index.html#més-enllà",
    "href": "notes/geoportal_api/ca/index.html#més-enllà",
    "title": "Preus a les gasolineres d’Espanya",
    "section": "Més enllà",
    "text": "Més enllà\n\nMapa de preus de gasolineres"
  },
  {
    "objectID": "notes/ca/geoportal_api/index.html",
    "href": "notes/ca/geoportal_api/index.html",
    "title": "Preus a les gasolineres d’Espanya",
    "section": "",
    "text": "On s’ón’ubiquen els punts de recàrrega?\nQuin carburant ofereixen?\nQuin preu cobren? Com canvia al llarg del temps?\nQuin horari obre?\nÉs d’autoservei?\nÉs una cooperativa?\nQui n’és el propietari?\nExisteixen portals similars a Europa"
  },
  {
    "objectID": "notes/ca/geoportal_api/index.html#quina-informació-hi-ha-al-geoportal",
    "href": "notes/ca/geoportal_api/index.html#quina-informació-hi-ha-al-geoportal",
    "title": "Preus a les gasolineres d’Espanya",
    "section": "",
    "text": "On s’ón’ubiquen els punts de recàrrega?\nQuin carburant ofereixen?\nQuin preu cobren? Com canvia al llarg del temps?\nQuin horari obre?\nÉs d’autoservei?\nÉs una cooperativa?\nQui n’és el propietari?\nExisteixen portals similars a Europa"
  },
  {
    "objectID": "notes/ca/geoportal_api/index.html#com-obtenim-les-dades",
    "href": "notes/ca/geoportal_api/index.html#com-obtenim-les-dades",
    "title": "Preus a les gasolineres d’Espanya",
    "section": "Com obtenim les dades?",
    "text": "Com obtenim les dades?\n\nConnexió amb la API\nCal connectarnos a la API del geoportal per obtenir les dades que ens interessen. Descarregarem en format .json, que R llegirà com llista. Finalment apilarem totes les observacions en una taula.\nEl geoportal ofereix múltiples APIs que donen accés a diferent informació (Servicios REST). Estem interessats en l’evolució dels preus de cada producte així que utilitzem la següent estructura:\nPart comú: Sempre serà la mateixa\nhttps://sedeaplicaciones.minetur.gob.es/ServiciosRESTCarburantes/PreciosCarburantes/\nPart Específica: Escollirem i parametritzarem en funció de l’informació que volem\nEstacionesTerrestresHist/FiltroProvinciaProducto/{FECHA}/{IDPROVINCIA}/{IDPRODUCTO}\n\n\nExemple en R\nUtilitzarem les següents llibreries d’R:\n\nsuppressWarnings(suppressMessages({\n  library(dplyr)\n  library(purrr)\n  library(httr2)\n}))\n\nEstem interessats en el preu de la gasolina 95 E5. Ens centrem en la província de Barcelona i volem l’informació del dia anterior. Els productes i províncies tenen codis associats, codificarem la data en format dd-mm-yy:\n\ndata &lt;- format(Sys.Date() - 1, \"%d-%m-%Y\")\nproducte &lt;- \"01\"\nprovincies &lt;- set_names(\n  c(\"08\", \"17\", \"25\", \"43\"), \n  c(\"barcelona\", \"girona\", \"lleida\", \"tarragona\")\n)\n\nConstruim l’url per cada província:\n\nbase_url &lt;- provincies %&gt;% \n  map(\\(prov) paste0(\n    \"https://sedeaplicaciones.minetur.gob.es/\",\n    \"ServiciosRESTCarburantes/PreciosCarburantes/\",\n    \"EstacionesTerrestresHist/FiltroProvinciaProducto/\",\n    data, \"/\", prov, \"/\", producte\n))\n\nDemanem l’informació, la convertim en llista i l’apilem en una taula per cada província:\n\nresponse &lt;- map(base_url, \\(url) req_perform(request(url)))\n\ntbl &lt;- response %&gt;% \n  map(\\(resp){\n    resp_body_json(resp)[[\"ListaEESSPrecio\"]] %&gt;% \n      map(\\(json) as_tibble(list_flatten(json))) %&gt;% \n      bind_rows() %&gt;% \n      mutate(PrecioProducto = as.numeric(sub(\",\", \".\", PrecioProducto)))\n  })\n\nFem una ullada als preus:\n\nwith(list_c(tbl), boxplot(PrecioProducto ~ Provincia, xlab = \"\", ylab = \"\"))\n\n\n\n\n\n\n\n\n\nhist(list_c(tbl)[[\"PrecioProducto\"]], breaks = 30, main = \"\", xlab = \"\", ylab = \"\")"
  },
  {
    "objectID": "notes/ca/geoportal_api/index.html#més-enllà",
    "href": "notes/ca/geoportal_api/index.html#més-enllà",
    "title": "Preus a les gasolineres d’Espanya",
    "section": "Més enllà",
    "text": "Més enllà\n\nMapa de preus de gasolineres"
  },
  {
    "objectID": "notes/en/a/index.html",
    "href": "notes/en/a/index.html",
    "title": "Evolution of gas prices in Llinars del Vallès and Cardedeu",
    "section": "",
    "text": "Use this R libraries:\nlibrary(httr2)\nlibrary(dplyr)\nlibrary(purrr)\nlibrary(tidyr)\nlibrary(ggplot2)\nDefine function to retrieve information:\nget_gas &lt;- function(filtro, args) {\n  paste0(\n    \"https://sedeaplicaciones.minetur.gob.es\",\n    \"/ServiciosRESTCarburantes/PreciosCarburantes/EstacionesTerrestresHist/\",\n    filtro, paste(args, collapse = \"/\")\n  ) %&gt;%\n    request() %&gt;%\n    req_perform() %&gt;%\n    resp_body_json() %&gt;%\n    .[[\"ListaEESSPrecio\"]] %&gt;%\n    map(\\(x) as_tibble(list_flatten(x))) %&gt;%\n    bind_rows() %&gt;%\n    janitor::clean_names()\n}\nRetrieve yesterday’s gas prices in catalan provinces:\nprov &lt;- c(\"08\", \"43\", \"17\", \"25\")\n\ngCat &lt;- map(prov, \\(x) get_gas(\n  filtro = \"FiltroProvincia/\",\n  args = c(format(Sys.Date() - 1, \"%d-%m-%Y\"), x)\n)) %&gt;%\n  bind_rows() %&gt;%\n  mutate(precio = as.numeric(gsub(\",\", \".\", precio_gasolina_95_e5)))\nSummary of gas stations and price statistics per province:1\ngCat %&gt;%\n  summarise(\n    n = n(),\n    mean = mean(precio, na.rm = TRUE) %&gt;% round(3),\n    median = median(precio, na.rm = TRUE) %&gt;% round(3),\n    sd = sd(precio, na.rm = TRUE) %&gt;% round(3),\n    .by = provincia\n  )\n\n# A tibble: 4 × 5\n  provincia     n  mean median    sd\n  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;\n1 BARCELONA   800  1.58   1.61 0.109\n2 TARRAGONA   230  1.58   1.63 0.108\n3 GIRONA      268  1.58   1.62 0.086\n4 LLEIDA      186  1.54   1.58 0.099\nWe are interest in historic prices from a certain province, for instance Cadiz whose code is 11. Considering daily observations for all Cadiz gas stations, a horizon of one year seems reasonable.\nDeclare province, product, horizon and API filter parameters:\nprov &lt;- \"11\"\nprod &lt;- \"01\"\nh &lt;- 366 / 12\nfil &lt;- \"FiltroProvinciaProducto/\"\n\ncadiz &lt;- map(format(Sys.Date() - 1:h, \"%d-%m-%Y\"), \\(x){\n  get_gas(filtro = fil, args = c(x, prov, prod)) %&gt;%\n    mutate(fecha = as.Date(x))\n}) %&gt;%\n  bind_rows() %&gt;%\n  mutate(precio = as.numeric(gsub(\",\", \".\", precio_producto)))\ngCat %&gt;%\n  filter(rotulo %in% (\n    summarise(gCat, .by = rotulo, n = n()) %&gt;%\n      arrange(n) %&gt;% pull(rotulo) %&gt;% tail(10)\n  )) %&gt;%\n  drop_na() %&gt;%\n  select(rotulo, precio) %&gt;%\n  ggplot(aes(rotulo, precio)) +\n  geom_boxplot() +\n  theme_bw() +\n  theme(\n    axis.title = element_blank()\n  ) +\n  labs(\n    title = \"Gas prices in Catalonia, 2025\",\n    subtitle = \"Euros per litre of gas 95 E5 (10 largest providers)\"\n  )"
  },
  {
    "objectID": "notes/en/a/index.html#footnotes",
    "href": "notes/en/a/index.html#footnotes",
    "title": "Evolution of gas prices in Llinars del Vallès and Cardedeu",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nConsidering 95 gas - E5↩︎"
  },
  {
    "objectID": "notes/en/gas_price_time/index.html",
    "href": "notes/en/gas_price_time/index.html",
    "title": "Evolution of gas prices in Llinars del Vallès",
    "section": "",
    "text": "Use this R libraries:\nlibrary(httr2)\nlibrary(dplyr)\nlibrary(purrr)\nlibrary(tidyr)\nlibrary(stringr)\nlibrary(ggplot2)\ntheme_set(\n  theme_bw() +\n  theme(\n    axis.title = element_blank()\n  )\n)\nDefine function to retrieve information:\nget_gas &lt;- function(filtro, args) {\n  paste0(\n    \"https://sedeaplicaciones.minetur.gob.es\",\n    \"/ServiciosRESTCarburantes/PreciosCarburantes/EstacionesTerrestresHist/\",\n    filtro, paste(args, collapse = \"/\")\n  ) %&gt;%\n    request() %&gt;%\n    req_perform() %&gt;%\n    resp_body_json() %&gt;%\n    .[[\"ListaEESSPrecio\"]] %&gt;%\n    map(\\(x) as_tibble(list_flatten(x))) %&gt;%\n    bind_rows() %&gt;%\n    janitor::clean_names()\n}\nRetrieve yesterday’s gas prices in catalan provinces:\nprov &lt;- c(\"08\", \"43\", \"17\", \"25\")\n\ngCat &lt;- map(prov, \\(x) get_gas(\n  filtro = \"FiltroProvincia/\",\n  args = c(format(Sys.Date() - 1, \"%d-%m-%Y\"), x)\n)) %&gt;%\n  bind_rows() %&gt;%\n  mutate(precio = as.numeric(gsub(\",\", \".\", precio_gasolina_95_e5)))\nSummary of gas stations and price statistics per province:1\ngCat %&gt;%\n  summarise(\n    n = n(),\n    mean = mean(precio, na.rm = TRUE) %&gt;% round(3),\n    median = median(precio, na.rm = TRUE) %&gt;% round(3),\n    sd = sd(precio, na.rm = TRUE) %&gt;% round(3),\n    .by = provincia\n  )\n\n# A tibble: 4 × 5\n  provincia     n  mean median    sd\n  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;\n1 BARCELONA   811  1.56   1.60 0.108\n2 TARRAGONA   232  1.56   1.61 0.105\n3 GIRONA      269  1.57   1.60 0.088\n4 LLEIDA      186  1.52   1.55 0.096\nPrices from the largest providers in Catalonia, 2025:\ngCat %&gt;%\n  filter(rotulo %in% (\n    summarise(gCat, .by = rotulo, n = n()) %&gt;%\n      arrange(n) %&gt;% pull(rotulo) %&gt;% tail(10)\n  )) %&gt;%\n  drop_na() %&gt;%\n  select(rotulo, precio) %&gt;%\n  ggplot(aes(rotulo, precio)) +\n  geom_boxplot() +\n  labs(\n    title = \"Gas prices in Catalonia, 2025\",\n    subtitle = \"Euros per litre of gas 95 E5 (10 largest providers)\"\n  )\nNarrow down geographical scope: Consider municipalities nearby Llinars del Vallès\nmuns &lt;- gCat %&gt;% \n  summarise(n = n(), m = round(mean(precio), 3), .by = c(municipio, id_municipio)) %&gt;% \n  filter(str_detect(municipio, \n    \"Llinars|Cardedeu|Vilamajor|Palautordera|Sant Celoni\"\n  ))\n\nknitr::kable(muns, caption = \"Average price and station count per municipality\")\n\n\nAverage price and station count per municipality\n\n\nmunicipio\nid_municipio\nn\nm\n\n\n\n\nCardedeu\n908\n4\n1.657\n\n\nLlinars del Vallès\n973\n3\n1.652\n\n\nSant Antoni de Vilamajor\n1060\n1\n1.629\n\n\nSant Celoni\n1065\n4\n1.627\n\n\nSanta Maria de Palautordera\n1123\n3\n1.601\nRetrieve daily prices for Gasolina 95 - E5 at all locations within scope. Define request parameters:\n# api end point\nfil &lt;- \"FiltroMunicipioProducto/\"\n\nt &lt;- Sys.time()\n# parameters\nanys &lt;- 1/12\nmun &lt;- set_names(muns$id_municipio, muns$municipio)\nprod &lt;- set_names(\"01\", \"gas95-e5\")\ndate &lt;- format(Sys.Date() - 1:(anys*365), \"%d-%m-%Y\")\nparams &lt;- expand_grid(date, mun, prod)\n\ngas &lt;- apply(params, 1, \\(x) mutate(get_gas(filtro = fil, args = x), date = as.Date(x[1]))) %&gt;% \n  bind_rows() %&gt;%\n  mutate(precio = as.numeric(gsub(\",\", \".\", precio_producto)))\nt &lt;- Sys.time() - t\nEvolution of average price per municipality:\nsummarise(gas, .by = c(municipio, date), price = mean(precio), desv = sd(precio)) %&gt;% \n  ggplot(aes(x = date, y = price, colour = municipio)) +\n  geom_line() +\n  labs(colour = \"Municipality\", title = \"Gas prive evolution, last 30 days\")"
  },
  {
    "objectID": "notes/en/gas_price_time/index.html#footnotes",
    "href": "notes/en/gas_price_time/index.html#footnotes",
    "title": "Evolution of gas prices in Llinars del Vallès",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nConsidering 95 gas - E5↩︎"
  }
]